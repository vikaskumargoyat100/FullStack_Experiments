1. backend/routes/todos.js
todo-app/
  backend/
    package.json
    .env
    server.js
    models/
      Todo.js
    routes/
      todos.js
  frontend/
    package.json
    src/
      index.js
      App.js
      api.js
      components/
        TodoList.js
        TodoItem.js
        TodoForm.js
    public/
      index.html
```

---

## Backend

### 1) `backend/package.json`

```json
{
  "name": "todo-backend",
  "version": "1.0.0",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  },
  "dependencies": {
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.2",
    "mongoose": "^7.0.0"
  },
  "devDependencies": {
    "nodemon": "^2.0.0"
  }
}
```

### 2) `backend/.env` (example)

```
PORT=5000
MONGO_URI=mongodb://localhost:27017/todoapp
# or your MongoDB Atlas connection string
```

### 3) `backend/models/Todo.js`

```js
const mongoose = require('mongoose');

const TodoSchema = new mongoose.Schema({
  text: { type: String, required: true },
  completed: { type: Boolean, default: false },
  createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Todo', TodoSchema);
```

### 4) `backend/routes/todos.js`

```js
const express = require('express');
const router = express.Router();
const Todo = require('../models/Todo');

// Create
router.post('/', async (req, res) => {
  try {
    const todo = new Todo({ text: req.body.text });
    const saved = await todo.save();
    res.status(201).json(saved);
  } catch (err) {
    res.status(400).json({ error: err.message });
  }
});

// Read all
router.get('/', async (req, res) => {
  try {
    const todos = await Todo.find().sort('-createdAt');
    res.json(todos);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});

// Update (toggle completed or edit text)
router.put('/:id', async (req, res) => {
  try {
    const updated = await Todo.findByIdAndUpdate(
      req.params.id,
      { $set: req.body },
      { new: true }
    );
    if (!updated) return res.status(404).json({ error: 'Not found' });
    res.json(updated);
  } catch (err) {
    res.status(400).json({ error: err.message });
  }
});

// Delete
router.delete('/:id', async (req, res) => {
  try {
    const deleted = await Todo.findByIdAndDelete(req.params.id);
    if (!deleted) return res.status(404).json({ error: 'Not found' });
    res.json({ message: 'Deleted' });
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});

module.exports = router;
```

### 5) `backend/server.js`

```js
require('dotenv').config();
const express = require('express');
const cors = require('cors');
const mongoose = require('mongoose');
const todosRouter = require('./routes/todos');

const app = express();
app.use(cors());
app.use(express.json());

app.use('/api/todos', todosRouter);

const PORT = process.env.PORT || 5000;

mongoose
  .connect(process.env.MONGO_URI, { useNewUrlParser: true, useUnifiedTopology: true })
  .then(() => {
    console.log('MongoDB connected');
    app.listen(PORT, () => console.log(`Server running on port ${PORT}`));
  })
  .catch(err => {
    console.error('MongoDB connection error:', err.message);
  });
```

---

## Frontend (React)

> The frontend assumes the backend is running on `http://localhost:5000` and React dev server on `http://localhost:3000`.

### 1) `frontend/package.json` (core deps)

```json
{
  "name": "todo-frontend",
  "private": true,
  "dependencies": {
    "react": "^18.0.0",
    "react-dom": "^18.0.0",
    "react-scripts": "5.0.1",
    "axios": "^1.0.0"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build"
  }
}
```

### 2) `frontend/src/api.js` — central API helper

```js
import axios from 'axios';

const API = axios.create({ baseURL: 'http://localhost:5000/api' });

export const fetchTodos = () => API.get('/todos');
export const createTodo = (text) => API.post('/todos', { text });
export const updateTodo = (id, payload) => API.put(`/todos/${id}`, payload);
export const deleteTodo = (id) => API.delete(`/todos/${id}`);
```

### 3) `frontend/src/index.js`

```js
import React from 'react';
import { createRoot } from 'react-dom/client';
import App from './App';

const root = createRoot(document.getElementById('root'));
root.render(<App />);
```

### 4) `frontend/src/App.js`

```js
import React, { useEffect, useState } from 'react';
import { fetchTodos, createTodo, updateTodo, deleteTodo } from './api';
import TodoForm from './components/TodoForm';
import TodoList from './components/TodoList';

export default function App() {
  const [todos, setTodos] = useState([]);
  const [loading, setLoading] = useState(true);

  async function load() {
    setLoading(true);
    try {
      const res = await fetchTodos();
      setTodos(res.data);
    } catch (err) {
      console.error(err);
    } finally {
      setLoading(false);
    }
  }

  useEffect(() => { load(); }, []);

  async function handleAdd(text) {
    const res = await createTodo(text);
    setTodos(prev => [res.data, ...prev]);
  }

  async function handleToggle(todo) {
    const res = await updateTodo(todo._id, { completed: !todo.completed });
    setTodos(prev => prev.map(t => t._id === res.data._id ? res.data : t));
  }

  async function handleEdit(id, text) {
    const res = await updateTodo(id, { text });
    setTodos(prev => prev.map(t => t._id === res.data._id ? res.data : t));
  }

  async function handleDelete(id) {
    await deleteTodo(id);
    setTodos(prev => prev.filter(t => t._id !== id));
  }

  return (
    <div style={{ maxWidth: 700, margin: '2rem auto', padding: '1rem' }}>
      <h1>Todo App</h1>
      <TodoForm onAdd={handleAdd} />
      {loading ? <p>Loading...</p> : (
        <TodoList
          todos={todos}
          onToggle={handleToggle}
          onEdit={handleEdit}
          onDelete={handleDelete}
        />
      )}
    </div>
  );
}
```

### 5) `frontend/src/components/TodoForm.js`

```js
import React, { useState } from 'react';

export default function TodoForm({ onAdd }) {
  const [text, setText] = useState('');

  function submit(e) {
    e.preventDefault();
    if (!text.trim()) return;
    onAdd(text.trim());
    setText('');
  }

  return (
    <form onSubmit={submit} style={{ marginBottom: '1rem' }}>
      <input
        value={text}
        onChange={e => setText(e.target.value)}
        placeholder="Add a new todo"
        style={{ padding: '0.5rem', width: '70%' }}
      />
      <button type="submit" style={{ padding: '0.5rem', marginLeft: '0.5rem' }}>Add</button>
    </form>
  );
}
```

### 6) `frontend/src/components/TodoList.js` and `TodoItem` (inline)

```js
import React, { useState } from 'react';

export function TodoItem({ todo, onToggle, onEdit, onDelete }) {
  const [editing, setEditing] = useState(false);
  const [text, setText] = useState(todo.text);

  function save() {
    if (!text.trim()) return;
    onEdit(todo._id, text.trim());
    setEditing(false);
  }

  return (
    <div style={{ display: 'flex', alignItems: 'center', padding: '0.5rem 0', borderBottom: '1px solid #eee' }}>
      <input type="checkbox" checked={todo.completed} onChange={() => onToggle(todo)} />
      {editing ? (
        <>
          <input value={text} onChange={e => setText(e.target.value)} style={{ flex: 1, marginLeft: '0.5rem' }} />
          <button onClick={save} style={{ marginLeft: '0.5rem' }}>Save</button>
          <button onClick={() => setEditing(false)} style={{ marginLeft: '0.25rem' }}>Cancel</button>
        </>
      ) : (
        <>
          <div style={{ flex: 1, marginLeft: '0.5rem', textDecoration: todo.completed ? 'line-through' : 'none' }}>
            {todo.text}
          </div>
          <button onClick={() => setEditing(true)}>Edit</button>
          <button onClick={() => onDelete(todo._id)} style={{ marginLeft: '0.25rem' }}>Delete</button>
        </>
      )}
    </div>
  );
}

2.frontend/package.json

# Todo Application — Full Stack (React + Node/Express + MongoDB)

**What you'll get in this document**

* Minimal, working full-stack Todo app with CRUD
* Backend (Node.js + Express + Mongoose)
* Frontend (Create React App style) using functional components and hooks
* Instructions to run locally (or with MongoDB Atlas)
* API endpoints and sample requests

---

## Project structure (suggested)

```
todo-app/
  backend/
    package.json
    .env
    server.js
    models/
      Todo.js
    routes/
      todos.js
  frontend/
    package.json
    src/
      index.js
      App.js
      api.js
      components/
        TodoList.js
        TodoItem.js
        TodoForm.js
    public/
      index.html
```

---

## Backend

### 1) `backend/package.json`

```json
{
  "name": "todo-backend",
  "version": "1.0.0",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  },
  "dependencies": {
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.2",
    "mongoose": "^7.0.0"
  },
  "devDependencies": {
    "nodemon": "^2.0.0"
  }
}
```

### 2) `backend/.env` (example)

```
PORT=5000
MONGO_URI=mongodb://localhost:27017/todoapp
# or your MongoDB Atlas connection string
```

### 3) `backend/models/Todo.js`

```js
const mongoose = require('mongoose');

const TodoSchema = new mongoose.Schema({
  text: { type: String, required: true },
  completed: { type: Boolean, default: false },
  createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Todo', TodoSchema);
```

### 4) `backend/routes/todos.js`

```js
const express = require('express');
const router = express.Router();
const Todo = require('../models/Todo');

// Create
router.post('/', async (req, res) => {
  try {
    const todo = new Todo({ text: req.body.text });
    const saved = await todo.save();
    res.status(201).json(saved);
  } catch (err) {
    res.status(400).json({ error: err.message });
  }
});

// Read all
router.get('/', async (req, res) => {
  try {
    const todos = await Todo.find().sort('-createdAt');
    res.json(todos);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});

// Update (toggle completed or edit text)
router.put('/:id', async (req, res) => {
  try {
    const updated = await Todo.findByIdAndUpdate(
      req.params.id,
      { $set: req.body },
      { new: true }
    );
    if (!updated) return res.status(404).json({ error: 'Not found' });
    res.json(updated);
  } catch (err) {
    res.status(400).json({ error: err.message });
  }
});

// Delete
router.delete('/:id', async (req, res) => {
  try {
    const deleted = await Todo.findByIdAndDelete(req.params.id);
    if (!deleted) return res.status(404).json({ error: 'Not found' });
    res.json({ message: 'Deleted' });
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});

module.exports = router;
```

### 5) `backend/server.js`

```js
require('dotenv').config();
const express = require('express');
const cors = require('cors');
const mongoose = require('mongoose');
const todosRouter = require('./routes/todos');

const app = express();
app.use(cors());
app.use(express.json());

app.use('/api/todos', todosRouter);

const PORT = process.env.PORT || 5000;

mongoose
  .connect(process.env.MONGO_URI, { useNewUrlParser: true, useUnifiedTopology: true })
  .then(() => {
    console.log('MongoDB connected');
    app.listen(PORT, () => console.log(`Server running on port ${PORT}`));
  })
  .catch(err => {
    console.error('MongoDB connection error:', err.message);
  });
```

---

## Frontend (React)

> The frontend assumes the backend is running on `http://localhost:5000` and React dev server on `http://localhost:3000`.

### 1) `frontend/package.json` (core deps)

```json
{
  "name": "todo-frontend",
  "private": true,
  "dependencies": {
    "react": "^18.0.0",
    "react-dom": "^18.0.0",
    "react-scripts": "5.0.1",
    "axios": "^1.0.0"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build"
  }
}
```

### 2) `frontend/src/api.js` — central API helper

```js
import axios from 'axios';

const API = axios.create({ baseURL: 'http://localhost:5000/api' });

export const fetchTodos = () => API.get('/todos');
export const createTodo = (text) => API.post('/todos', { text });
export const updateTodo = (id, payload) => API.put(`/todos/${id}`, payload);
export const deleteTodo = (id) => API.delete(`/todos/${id}`);
```

### 3) `frontend/src/index.js`

```js
import React from 'react';
import { createRoot } from 'react-dom/client';
import App from './App';

const root = createRoot(document.getElementById('root'));
root.render(<App />);
```

### 4) `frontend/src/App.js`

```js
import React, { useEffect, useState } from 'react';
import { fetchTodos, createTodo, updateTodo, deleteTodo } from './api';
import TodoForm from './components/TodoForm';
import TodoList from './components/TodoList';

export default function App() {
  const [todos, setTodos] = useState([]);
  const [loading, setLoading] = useState(true);

  async function load() {
    setLoading(true);
    try {
      const res = await fetchTodos();
      setTodos(res.data);
    } catch (err) {
      console.error(err);
    } finally {
      setLoading(false);
    }
  }

  useEffect(() => { load(); }, []);

  async function handleAdd(text) {
    const res = await createTodo(text);
    setTodos(prev => [res.data, ...prev]);
  }

  async function handleToggle(todo) {
    const res = await updateTodo(todo._id, { completed: !todo.completed });
    setTodos(prev => prev.map(t => t._id === res.data._id ? res.data : t));
  }

  async function handleEdit(id, text) {
    const res = await updateTodo(id, { text });
    setTodos(prev => prev.map(t => t._id === res.data._id ? res.data : t));
  }

  async function handleDelete(id) {
    await deleteTodo(id);
    setTodos(prev => prev.filter(t => t._id !== id));
  }

  return (
    <div style={{ maxWidth: 700, margin: '2rem auto', padding: '1rem' }}>
      <h1>Todo App</h1>
      <TodoForm onAdd={handleAdd} />
      {loading ? <p>Loading...</p> : (
        <TodoList
          todos={todos}
          onToggle={handleToggle}
          onEdit={handleEdit}
          onDelete={handleDelete}
        />
      )}
    </div>
  );
}
```

### 5) `frontend/src/components/TodoForm.js`

```js
import React, { useState } from 'react';

export default function TodoForm({ onAdd }) {
  const [text, setText] = useState('');

  function submit(e) {
    e.preventDefault();
    if (!text.trim()) return;
    onAdd(text.trim());
    setText('');
  }

  return (
    <form onSubmit={submit} style={{ marginBottom: '1rem' }}>
      <input
        value={text}
        onChange={e => setText(e.target.value)}
        placeholder="Add a new todo"
        style={{ padding: '0.5rem', width: '70%' }}
      />
      <button type="submit" style={{ padding: '0.5rem', marginLeft: '0.5rem' }}>Add</button>
    </form>
  );
}
```

### 6) `frontend/src/components/TodoList.js` and `TodoItem` (inline)

```js
import React, { useState } from 'react';

export function TodoItem({ todo, onToggle, onEdit, onDelete }) {
  const [editing, setEditing] = useState(false);
  const [text, setText] = useState(todo.text);

  function save() {
    if (!text.trim()) return;
    onEdit(todo._id, text.trim());
    setEditing(false);
  }

  return (
    <div style={{ display: 'flex', alignItems: 'center', padding: '0.5rem 0', borderBottom: '1px solid #eee' }}>
      <input type="checkbox" checked={todo.completed} onChange={() => onToggle(todo)} />
      {editing ? (
        <>
          <input value={text} onChange={e => setText(e.target.value)} style={{ flex: 1, marginLeft: '0.5rem' }} />
          <button onClick={save} style={{ marginLeft: '0.5rem' }}>Save</button>
          <button onClick={() => setEditing(false)} style={{ marginLeft: '0.25rem' }}>Cancel</button>
        </>
      ) : (
        <>
          <div style={{ flex: 1, marginLeft: '0.5rem', textDecoration: todo.completed ? 'line-through' : 'none' }}>
            {todo.text}
          </div>
          <button onClick={() => setEditing(true)}>Edit</button>
          <button onClick={() => onDelete(todo._id)} style={{ marginLeft: '0.25rem' }}>Delete</button>
        </>
      )}
    </div>
  );
}

export default function TodoList({ todos, onToggle, onEdit, onDelete }) {
  if (!todos.length) return <p>No todos yet — add one!</p>;
  return (
    <div>
      {todos.map(t => (
        <TodoItem key={t._id} todo={t} onToggle={onToggle} onEdit={onEdit} onDelete={onDelete} />
      ))}
    </div>
  );
}
